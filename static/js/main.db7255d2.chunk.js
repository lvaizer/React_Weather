(this.webpackJsonpreact_weather=this.webpackJsonpreact_weather||[]).push([[0],{22:function(e,t,a){e.exports={card:"LocationItem_card__29Qw0",card_image:"LocationItem_card_image__6WsXK",card_margin_bottom:"LocationItem_card_margin_bottom__1sLs4",card_footer:"LocationItem_card_footer__2MrTa",favorite_div:"LocationItem_favorite_div__3a1zY"}},46:function(e,t,a){e.exports={header:"Header_header__39g7w",links:"Header_links__1KLEy"}},78:function(e,t,a){e.exports=a(99)},83:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),i=(a(83),a(46)),l=a.n(i),s=a(44),u=a(136),m=a(139),f=a(140),d=function(){return r.a.createElement("div",null,r.a.createElement(u.a,{position:"static",className:l.a.header},r.a.createElement(m.a,null,r.a.createElement(f.a,{variant:"h6",className:l.a.links},r.a.createElement("img",{src:"./logo192.png",alt:"header_image"})),r.a.createElement(f.a,{variant:"h6",className:l.a.links},r.a.createElement(s.b,{to:"/"},"Home")))))},h=a(50),v=a.n(h),g=a(62),w=a(14),p=a(22),b=a.n(p),E=a(63),_=function e(t,a,n,r,o,c,i,l,s,u){var m=this;Object(E.a)(this,e),this.generateImage=function(){return m.image="./img/"+O(m.id)+".jpg"},this.shouldRefresh=function(){return!isNaN(m.temp)||!m.name||!isNaN(m.min_temp)||!isNaN(m.max_temp)||!isNaN(m.wind)||!m.humidity||!m.description},this.lat=t,this.lon=a,this.name=n,this.temp=parseInt(r),this.min_temp=parseInt(o),this.max_temp=parseInt(c),this.feels_like=parseInt(i),this.humidity=l,this.wind=parseInt(s),this.description=u,this.id=1e3},O=function(e){switch(!0){case e<500:return"storm";case e<600:return"rain";case e<700:return"snow";case e<800:return"mist";case e<801:return"clear";default:return"clouds"}};var j=new function(){var e=function(){var e=[];return localStorage.getItem("locations")?(JSON.parse(localStorage.getItem("locations")).forEach((function(t){e.push(Object.assign(new _,t))})),e):e}(),t=function(){return localStorage.setItem("locations",JSON.stringify(e))};this.add=function(a){a&&e.push(a),t()},this.remove=function(a){if(a){var n=e.indexOf(e.filter((function(e){return e.name===a.name}))[0]);-1!==n&&(e.splice(n,1),t())}},this.get=function(){return e},this.isSaved=function(t){return!!t&&e.filter((function(e){return e.name===t.name})).length>0}};var y=new function(){this.getDataByLocation=function(t,a){return new Promise((function(n){fetch("https://api.openweathermap.org/data/2.5/weather?appid=620df9c48870a46c19bd4f30eb0be7b5&units=metric&lat="+t+"&lon="+a).then((function(e){return e.json()})).then((function(t){return n(e(t))})).catch((function(e){return n(e)}))}))};var e=function(e){var t;return e&&e.main?(t=new _(e.coord.lat,e.coord.lon,e.name,e.main.temp,e.main.temp_min,e.main.temp_max,e.main.feels_like,e.main.humidity),e.wind&&(t.wind=e.wind.speed),e.weather&&e.weather.length>0&&(t.description=e.weather[0].description,t.icon="http://openweathermap.org/img/wn/"+e.weather[0].icon+".png",t.id=e.weather[0].id,t.generateImage())):console.error(e),t}},k=(a(89),a(27)),S=a(141),C=a(142),I=a(143),N=a(144),T=a(145),R=a(146),x=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)(),o=Object(w.a)(a,2)[1],c=Object(n.useState)(!1),i=Object(w.a)(c,2),l=(i[0],i[1]),s=Object(n.useState)(!1),u=Object(w.a)(s,2),m=u[0],d=u[1],h=Object(n.useState)(e.weatherObject),v=Object(w.a)(h,2),g=v[0],p=v[1],E=j.isSaved(g),_=null;Object(n.useEffect)((function(){O()}),[]),Object(n.useImperativeHandle)(t,(function(){return{setWeatherObj:function(e){E=j.isSaved(e),p(e),O()}}}));var O=function(){return g&&g.shouldRefresh()&&B()},x=function(t){L(t),e.favoriteClicked&&e.favoriteClicked()},L=function(t){return e.showToast&&e.showToast(!0,t)},B=function(){d(!0),H(g.lat,g.lon).then((function(e){e&&Object.assign(g,e),_=!e||null,M(!e)})).catch((function(e){console.error(e),M(!0)}))},M=function(e){d(!1),e&&L("Error occurred, please try again later.")},H=function(e,t){return new Promise((function(a){y.getDataByLocation(e,t).then((function(e){return a(e)})).catch((function(e){console.error(e),a(e)}))}))},W=(E?"Remove from":"Add to")+" My locations",F="./img/favorite_"+(E?"remove":"add")+".svg";return r.a.createElement("div",{className:b.a.card},m?r.a.createElement(S.a,{style:{width:"18rem",alignItems:"center"},className:b.a.card},r.a.createElement(C.a,{disableShrink:!0})):_?r.a.createElement(S.a,{style:{width:"18rem",alignItems:"center"},className:b.a.card},r.a.createElement("div",{className:b.a.favorite_div},r.a.createElement("img",{alt:"refresh button",src:"./img/refresh.svg",onClick:B})),r.a.createElement(S.a.Title,null,"There is a temporary error, please try again later")):r.a.createElement(S.a,null,r.a.createElement("div",{className:b.a.favorite_div},r.a.createElement(I.a,{arrow:!0,title:W},r.a.createElement("div",null,r.a.createElement("img",{alt:"favorite button",src:F,onClick:function(){var t=j.isSaved(g);t?j.remove(g):j.add(g),E=!t,l(t&&e.canBeRemoved);var a="The location"+(g&&"undefined"!==typeof g.name?'"'+g.name+'"':"")+" was "+(t?"removed":"added")+" successfully";e.canBeRemoved&&t?setTimeout((function(){x(a)}),200):(o([]),x(a))}}))),r.a.createElement("div",null,r.a.createElement("img",{alt:"refresh button",src:"./img/refresh.svg",onClick:B}))),r.a.createElement(N.a,{className:b.a.card_image,image:g.image,component:"div",title:g.name}),r.a.createElement(T.a,null,r.a.createElement(f.a,{variant:"h5",component:"h2"},Object(k.capitalize)(g.name)),r.a.createElement(f.a,{className:b.a.card_margin_bottom,variant:"subtitle1",color:"textSecondary"},Object(k.capitalize)(g.description)),r.a.createElement(f.a,{className:b.a.card_margin_bottom},r.a.createElement("strong",null,g.temp,"\xb0"),"\xa0(feels like ",g.feels_like,"\xb0)"),r.a.createElement(R.a,{container:!0,className:b.a.card_footer},r.a.createElement(R.a,{item:!0,xs:4},r.a.createElement(f.a,null,r.a.createElement("img",{alt:"wind_icon",src:"./img/temperature_icon.svg"})),r.a.createElement(f.a,null,g.min_temp,"\xb0-",g.max_temp,"\xb0")),r.a.createElement(R.a,{item:!0,xs:4},r.a.createElement(f.a,null,r.a.createElement("img",{alt:"wind_icon",src:"./img/wind_icon.svg"})),r.a.createElement(f.a,null,g&&g.wind," km/h")),r.a.createElement(R.a,{item:!0,xs:4},r.a.createElement(f.a,null,r.a.createElement("img",{alt:"wind_icon",src:"./img/humidity_icon.svg"})),r.a.createElement(f.a,null,g&&g.humidity,"%"))))))})),L=function(e){var t=Object(n.useState)(),a=Object(w.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(!0),l=Object(w.a)(i,2),s=l[0],u=l[1];Object(n.useEffect)((function(){m().then()}));var m=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation.getCurrentPosition((function(e){return t=e.coords.latitude,a=e.coords.longitude,c(new _(t,a));var t,a}),(function(e){console.error(e),u(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s?r.a.createElement("div",null,r.a.createElement("h5",null,"Current location"),o&&r.a.createElement(x,{key:"myLocation",weatherObject:o,favoriteClicked:e.favoriteClicked,showToast:e.showToast})):r.a.createElement(r.a.Fragment,null)},B=a(148),M=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)(),o=Object(w.a)(a,2)[1];Object(n.useImperativeHandle)(t,(function(){return{favoriteClicked:function(){o([])}}}));var c=function(){return o([])};return r.a.createElement("div",null,r.a.createElement("h5",null,"Favorite locations"),r.a.createElement(R.a,null," ",j.get().map((function(t){return r.a.createElement(x,{key:t.name,weatherObject:t,canBeRemoved:!0,showToast:e.showToast,favoriteClicked:c})}))))})),H=a(149),W=a(150),F=function(e){var t=Object(n.useState)([]),a=Object(w.a)(t,2),o=a[0],c=a[1],i=Object(k.debounce)((function(e){e&&0!==e.trim().length&&fetch("https://places-dsn.algolia.net/1/places/query",{method:"POST",body:JSON.stringify({query:e,type:"city",language:"en"})}).then((function(e){return e.json()})).then((function(e){return l(e)})).catch((function(e){return console.error(e)}))}),500),l=function(e){if(e.hits){c([]);var t=[];e.hits.forEach((function(a){a.locale_names[0].toLowerCase().includes(e.query.toLowerCase())&&t.push({name:a.locale_names[0],lat:a._geoloc.lat,lon:a._geoloc.lng})})),c(t)}},s=function(e){return o.filter((function(t){return Object(k.isEqual)(t.name,e)}))};return r.a.createElement("div",null,r.a.createElement(W.a,{freeSolo:!0,onInputChange:function(e){return i(e.target.value)},onChange:function(t){var a=s(t.target.textContent);if(!Object(k.isEmpty)(a)){var n=new _(a[0].lat,a[0].lon,a[0].name);e.onLocationFound(n),c([])}},options:o.map((function(e){return e.name})),renderInput:function(e){return r.a.createElement(H.a,Object.assign({},e,{label:"Search location",margin:"normal",variant:"outlined"}))}}))},J=a(153),q=Object(n.forwardRef)((function(e,t){var a=Object(n.useRef)(),o=Object(n.useState)({weatherObj:null,showModal:!1}),c=Object(w.a)(o,2),i=c[0],l=c[1];return Object(n.useImperativeHandle)(t,(function(){return{setWeatherObj:function(e){l({weatherObj:e,showModal:!0}),a&&a.current&&a.current.setWeatherObj(e)}}})),r.a.createElement("div",null,i.weatherObj&&r.a.createElement(J.a,{open:i.showModal,onClose:function(){return l({weatherObj:null,showModal:!1})}},r.a.createElement(x,{key:"resultsFound",ref:a,favoriteClicked:e.favoriteClicked,weatherObject:i.weatherObj,canBeRemoved:!1,showToast:e.showToast})))})),z=a(152),P=a(147),D=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({showToast:!1,toastMessage:""}),o=Object(w.a)(a,2),c=o[0],i=o[1];Object(n.useImperativeHandle)(t,(function(){return{forceShowToast:function(e,t){l(e,t)}}}));var l=function(e,t){return i({showToast:e,toastMessage:t})};return r.a.createElement(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:P.a,open:c.showToast,onClose:function(){return l(!1)},autoHideDuration:1e3,message:c.toastMessage})})),K=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),o=function(e,t){return a&&a.current.forceShowToast(e,t)},c=function(){return e&&e.current.favoriteClicked()};return r.a.createElement(B.a,null,r.a.createElement(F,{onLocationFound:function(e){return t&&t.current&&t.current.setWeatherObj(e)}}),r.a.createElement(D,{ref:a}),r.a.createElement(q,{ref:t,favoriteClicked:c,showToast:o}),r.a.createElement(L,{favoriteClicked:c,showToast:o,canBeRemoved:!1}),r.a.createElement(M,{ref:e,showToast:o}))},A=function(){return r.a.createElement(s.a,null,r.a.createElement(d,null),r.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[78,1,2]]]);
//# sourceMappingURL=main.db7255d2.chunk.js.map